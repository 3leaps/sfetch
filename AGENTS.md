---
title: AGENTS.md
description: Lightweight agentic attribution and development standards for sfetch
author_of_record: Dave Thompson (@3leapsdave)
status: draft
---

# Agentic Attribution & Standards

## Operating Model

| Aspect | Setting                                  |
| ------ | ---------------------------------------- |
| Mode   | Supervised (human reviews before commit) |
| Role   | Development Lead (`devlead`)             |

Supervised sessions do not have persistent identity. The supervising maintainer
(see `MAINTAINERS.md`) is the Committer-of-Record for all commits.

## Roles

sfetch keeps a lightweight local role catalog for offline use: `docs/agent-roles.md`.
Default to `devlead`, and use specialized roles only when the task requires it.

## Commit Message Template (REQUIRED)

**All AI-assisted commits MUST end with these three lines:**

```
Generated by [Model] ([URL]) running [Tool] ([URL]) under supervision of [@3leapsdave](https://github.com/3leapsdave)

Co-Authored-By: [Model] <noreply@3leaps.net>
Committer-of-Record: Dave Thompson <dave@3leaps.net> [@3leapsdave]
```

### Full Example

```
feat: example change

Brief description.

ðŸŽ¯ Changes:
- Specific change 1
- Specific change 2

Generated by Claude Opus 4.5 (https://anthropic.com) running Claude Code (https://claude.com/claude-code) under supervision of [@3leapsdave](https://github.com/3leapsdave)

Co-Authored-By: Claude Opus 4.5 <noreply@3leaps.net>
Committer-of-Record: Dave Thompson <dave@3leaps.net> [@3leapsdave]
```

### Model/Tool Examples
- `Generated by Claude Opus 4.5 (https://anthropic.com) running Claude Code (https://claude.com/claude-code) under supervision of [@3leapsdave](https://github.com/3leapsdave)`
- `Generated by Grok 4.1 (https://x.ai) running OpenCode (https://opencode.ai) under supervision of [@3leapsdave](https://github.com/3leapsdave)`

## Development Standards

As a security-focused CLI, prioritize transparency and testability:

### Code
- Idiomatic Go: Follow [Effective Go](https://go.dev/doc/effective_go) and [Go Code Review Comments](https://github.com/golang/go/wiki/CodeReviewComments).
- No `fmt.Print*` pollution in verification logic; use `fmt.Fprintf(os.Stderr, ...)` for errors.
- Error wrapping: `fmt.Errorf("context: %w", err)`.

### Testing
- Unit: Table-driven tests covering edge cases (e.g., invalid sigs, checksum mismatches).
- Integration: `go test ./...` + `testdata/` fixtures; verify full flows.
- Run: `make test` (or `go test ./... -v`).

### Verification
- Linting: `go fmt ./... && go vet ./...`.
- Security changes: Add tests for verification paths; run integration tests.
- Skepticism: All sig/checksum logic must be auditable; prefer stdlib crypto.

Keep docs minimal; focus on tests for assurance.

## DO / DO NOT

### DO
- Follow commit message template for all AI-assisted commits
- Run `make precommit` before committing changes
- Test changes thoroughly with `make test`
- Update documentation for user-facing changes
- Use semantic versioning for releases

### DO NOT
- **Push code without maintainer approval** - All changes must be reviewed before pushing to main
- **Push code except at tag and release merge points** - Only push when creating releases or merging approved release branches
- **Stage or commit `.plans/` files** - The `.plans/` directory is gitignored; it contains local planning docs that are not part of the repo
- Commit directly to main branch - Use feature branches and pull requests
- Skip security testing for verification-related changes
- Use `fmt.Print*` in verification logic (use `fmt.Fprintf(os.Stderr, ...)` instead)
